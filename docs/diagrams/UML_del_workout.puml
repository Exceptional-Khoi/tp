@startuml
title FitChasers Workout Deletion - Sequence Diagram
' --- Styling (kept minimal & consistent) ---
skinparam sequenceParticipantType rectangle
skinparam shadowing false
skinparam responseMessageBelowArrow true
hide footbox

actor    User
participant ":UI" as UI
participant ":FitChasers" as App
participant ":WorkoutManager" as WM
participant ":DeleteParser" as DP
participant ":FileHandler" as FH
participant ":Workout" as W

User -> UI : enterText()
UI -> App : readCommand()
App -> WM : deleteParser(command)

WM -> DP : parse(args, currentMonth)

alt parseError
  WM -> UI : showError(errorWithUsage)
else parsedOk
  WM -> FH : loadMonthList(targetMonth)

  alt noWorkoutsForMonth
    WM -> UI : showMessage("No workouts found for " + targetMonth + ".")
    WM -> UI : showMessage("Use /view_log to check available months.")
  else workoutsExist
    WM -> WM : sortByStartDescThenEndDesc()

    alt invalidDisplayIndex
      WM -> UI : showMessage("Invalid workout ID: X")
      WM -> UI : showMessage("Please use a valid ID between 1 and N")
      WM -> UI : showMessage("Tip: /view_log m/MM")
    else validDisplayIndex
      WM -> W : selectByDisplayIndex(index)
      WM -> UI : showMessage("You are about to delete:")
      WM -> UI : displayDetailsOfWorkout(workout)
      WM -> UI : showMessage("Are you sure? (y/n)")
      UI -> WM : confirmationMessage()

      alt notConfirmed
        WM -> UI : showMessage("Deletion cancelled.")
      else confirmed
        WM -> WM : removeFromList(index)
        WM -> FH : saveMonthList(targetMonth, monthWorkouts)

        alt targetMonth == currentLoadedMonth
          WM -> WM : setWorkouts(monthWorkouts, targetMonth)
        end

        WM -> UI : showMessage("Deleted workout: " + deletedName)
      end
    end
  end
end

UI -> User : displayMessage()
@enduml
